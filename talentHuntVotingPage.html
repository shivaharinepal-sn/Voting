<!DOCTYPE html>
<html>
<head>
    <title>Voting for Contestants</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 30px;
            background-color: #f0f8ff;
        }
        h2 { color: #333; }
        input[type="text"] {
            padding: 8px;
            font-size: 16px;
            width: 200px;
            margin-right: 10px;
        }
        button {
            padding: 8px 15px;
            margin: 5px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            color: white;
        }
        .disabled { background-color: #aaa; cursor: not-allowed; }
        #voteSection { display: none; margin-top: 20px; }
        .result { margin-top: 20px; font-size: 16px; color: #444; text-align: left; display: inline-block; }
        #buttonsContainer { max-width: 800px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: center; }
    </style>
</head>
<body>

<h2>Login to Vote</h2>

<div id="loginSection">
    <input type="text" id="username" placeholder="Enter your name">
    <button style="background-color: rgb(2, 2, 238);" onclick="login()">Login</button>
</div>

<div id="voteSection">
    <h2>Welcome, <span id="userDisplay"></span>! Vote for your favorite contestant:</h2>
    <div id="buttonsContainer"></div>
    <div class="result" id="resultText"></div>
</div>

<script>
    const contestantCount = 30;
    const colors = ["#4CAF50","#2196F3","#FF5722","#9C27B0","#FF9800","#E91E63","#00BCD4","#8BC34A","#FFC107","#673AB7"];
    let votes = Array(contestantCount).fill(0);
    let voted = false;

    

    function login() {
        const username = document.getElementById("username").value.trim();
        if(username === "") { alert("Please enter your name!"); return; }
        document.getElementById("userDisplay").innerText = username;
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("voteSection").style.display = "block";

        // check if user already voted
        if(localStorage.getItem("voted_"+username)){
            voted = true;
        }

        createButtons();
        showResults();
    }

    function createButtons() {
        const container = document.getElementById("buttonsContainer");
        container.innerHTML = "";
        for(let i=0; i<contestantCount; i++){
            const btn = document.createElement("button");
            btn.innerText = "Contestant " + (i+1);
            btn.style.backgroundColor = colors[i % colors.length];
            btn.id = "btn" + i;
            btn.onclick = () => vote(i);
            if(voted) {
                btn.disabled = true;
                btn.classList.add("disabled");
            }
            container.appendChild(btn);
        }
    }

    function vote(index) {
        if(voted) return;

        const username = document.getElementById("userDisplay").innerText;
        votes[index]++;
        voted = true;

        // save votes and mark user voted
        localStorage.setItem("votes", JSON.stringify(votes));
        localStorage.setItem("voted_"+username, true);

        // disable all buttons
        for(let i=0; i<contestantCount; i++){
            const btn = document.getElementById("btn"+i);
            btn.disabled = true;
            btn.classList.add("disabled");
        }

        showResults();
    }

    function showResults() {
        let total = votes.reduce((a,b)=>a+b,0);
        let text = "";
        for(let i=0;i<contestantCount;i++){
            let percent = total > 0 ? ((votes[i]/total)*100).toFixed(1) : 0.0;
            text += "Contestant " + (i+1) + ": " + votes[i] + " votes (" + percent + "%)<br>";
        }
        document.getElementById("resultText").innerHTML = text;
    }
</script>

</body>
</html>

